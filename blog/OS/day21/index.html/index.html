<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">





        <link rel="dns-prefetch" href="https://cdn-city.livere.com"/>










    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            Day21 | 
        
        CCDV2&#39;s nest
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/blog/img/1590.png">
    <link rel="icon" href="/blog/img/1590.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="今天补完了昨天的中断，以及开始了对操作系统的保护。">
    <meta name="keywords" content=",OS">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/blog/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/blog/css/style.min.css?MKetZV3cUTfDxvMffaOezg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/blog/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/blog/css/prettify/atelier-seaside-light.min.css?b71t6V/NeTk95fu056Paxw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-image: url(/blog/img/bg3.png);
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/blog/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/blog/js/jquery.min.js?ezyEvm8ST5CGfpA+kFFi1g==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="CCDV2&#39;s nest">
    <meta name="msapplication-starturl" content="https://ccdv2.github.io/blog/blog/OS/day21//">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="CCDV2&#39;s nest">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/blog/img/1590.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://ccdv2.github.io/blog/blog/OS/day21//">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Day21 | CCDV2&#39;s nest">
    <meta property="og:image" content="/blog/img/1590.png">
    <meta property="og:description" content="今天补完了昨天的中断，以及开始了对操作系统的保护。">
    <meta property="og:article:tag" content="OS"> 

    
        <meta property="article:published_time" content="Wed Apr 17 2019 22:57:59 GMT+0800">
        <meta property="article:modified_time" content="Thu Apr 18 2019 22:05:36 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://ccdv2.github.io/blog/blog/OS/day21/index.html/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "https://ccdv2.github.io/blog/blog/OS/day21/index.html/index.html",
    "headline": "Day21",
    "datePublished": "Wed Apr 17 2019 22:57:59 GMT+0800",
    "dateModified": "Thu Apr 18 2019 22:05:36 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "CCDV2",
        "image": {
            "@type": "ImageObject",
            "url": "/img/1590.png"
        },
        "description": "高海千歌 is the 最高！（大雾）"
    },
    "publisher": {
        "@type": "Organization",
        "name": "CCDV2&#39;s nest",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/1590.png"
        }
    },
    "keywords": ",OS",
    "description": "今天补完了昨天的中断，以及开始了对操作系统的保护。",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span id="MD-burger-id" class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#一些感想"><span class="post-toc-number">1.</span> <span class="post-toc-text">一些感想</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#API（续）"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">API（续）</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#执行C语言应用程序"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">执行C语言应用程序</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#保护操作系统"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">保护操作系统</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#处理异常"><span class="post-toc-number">1.4.</span> <span class="post-toc-text">处理异常</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#攻克难题——字符串显示API"><span class="post-toc-number">2.</span> <span class="post-toc-text">攻克难题——字符串显示API</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#用C语言编写应用程序"><span class="post-toc-number">3.</span> <span class="post-toc-text">用C语言编写应用程序</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#保护操作系统（1）"><span class="post-toc-number">4.</span> <span class="post-toc-text">保护操作系统（1）</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#保护操作系统（2）"><span class="post-toc-number">5.</span> <span class="post-toc-text">保护操作系统（2）</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#对异常的支持"><span class="post-toc-number">6.</span> <span class="post-toc-text">对异常的支持</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#保护操作系统（3）"><span class="post-toc-number">7.</span> <span class="post-toc-text">保护操作系统（3）</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#保护操作系统（4）"><span class="post-toc-number">8.</span> <span class="post-toc-text">保护操作系统（4）</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/blog/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                Day21
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/blog/img/1590.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>CCDV2</strong>
        <span>4月 17, 2019</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/blog/tags/OS/">OS</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Day21&url=https://ccdv2.github.io/blog/blog/OS/day21/index.html/index.html&pic=https://ccdv2.github.io/blog/img/1590.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Day21&url=https://ccdv2.github.io/blog/blog/OS/day21/index.html/index.html&via=CCDV2" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://ccdv2.github.io/blog/blog/OS/day21/index.html/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://ccdv2.github.io/blog/blog/OS/day21/index.html/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>今天补完了昨天的中断，以及开始了对操作系统的保护。<br><a id="more"></a></p>
<h1 id="一些感想"><a href="#一些感想" class="headerlink" title="一些感想"></a>一些感想</h1><h2 id="API（续）"><a href="#API（续）" class="headerlink" title="API（续）"></a>API（续）</h2><p>昨天貌似有个程序并不能正确打印字符串。原因是打印单个字符的时候，可以通过[CS:ECX]来指定代码段，但是显示字符串的时候不能这样，于是就会误认为是DS（数据段）的地址，达不到预期的结果。<br>所以作者采用的方法是调用中断时，预先在某个商量好的位置指定代码段的基址，这样就能保证找到想要的了（一种类似全局变量的写法）。</p>
<p>然后补全一下应用程序调用API，昨天主要讲的是从汇编往下调用，现在补一下C语言调用相应的汇编。</p>
<pre><code class="c">_api_putchar:    ; void api_putchar(int c);
        MOV        EDX,1
        MOV        AL,[ESP+4]        ; c
        INT        0x40
        RET
</code></pre>
<h2 id="执行C语言应用程序"><a href="#执行C语言应用程序" class="headerlink" title="执行C语言应用程序"></a>执行C语言应用程序</h2><p>这应该是要定位入口的意思</p>
<pre><code class="c">[BITS 32]
    CALL 0x1b
    RETF
</code></pre>
<p>0x1b是生成的可执行文件中HariMain的地址，RETF则是在程序执行完毕后返回命令行。<br>但其实到了后面，应用程序的结束是产生一个中断，这样来返回操作系统。</p>
<h2 id="保护操作系统"><a href="#保护操作系统" class="headerlink" title="保护操作系统"></a>保护操作系统</h2><p>保护操作系统有以下的一些方式</p>
<ol>
<li>设置应用程序专用的内存空间<br>把一块专属于应用程序的内存分给它。可以把这块内存注册到GDT中。</li>
<li>禁止应用程序修改某些寄存器<br>把操作系统的栈、寄存器保存起来，应用程序使用应用程序需要用的。</li>
<li>硬件实现<br>x86提供了一些异常处理的方法，甚至包括保存恢复各种栈和寄存器，可以说很方便了。</li>
</ol>
<h2 id="处理异常"><a href="#处理异常" class="headerlink" title="处理异常"></a>处理异常</h2><p>既然有了保护机制，当出现异常情况的时候就需要处理。硬件层面上，已经有了相应的中断机制，因此只要在0x0d上注册一个中断服务程序即可。<br>我们需要把访问段的权限+0x60，这样变为应用程序可用的段。<br>与此同时，操作系统调用应用程序的时候，需要RETF，应用程序返回操作系统的时候，通过API来返回</p>
<h1 id="攻克难题——字符串显示API"><a href="#攻克难题——字符串显示API" class="headerlink" title="攻克难题——字符串显示API"></a>攻克难题——字符串显示API</h1><blockquote>
<p>harib18a</p>
</blockquote>
<p>既然是没有指定正确的段，那么要做的就是把正确的段存到某个地方，供API使用。</p>
<pre><code class="c">if(finfo != 0)
{
    // 找到文件的情况
    p = (char *)memman_alloc_4k(memman, finfo-&gt;size);
    *((int *)0xfe8) = (int)p;
    file_loadfile(finfo-&gt;clustno, finfo-&gt;size, p, fat, (char *)(ADR_DISKIMG + 0x003e00));
    set_segmdesc(gdt + 1003, finfo-&gt;size - 1, (int)p, AR_CODE32_ER);
    farcall(0, 1003 * 8);
    memman_free_4k(memman, (int)p, finfo-&gt;size);
    cons_newline(cons);
    return 1;
}
</code></pre>
<p>在0xfe8这个地方存入了我们需要的基址<br>之后，调整我们的API</p>
<pre><code class="c">void hrb_api(int edi, int esi, int ebp, int esp, int ebx, int edx, int ecx, int eax)
{
    int cs_base = *((int *)0xfe8);
    struct CONSOLE *cons = (struct CONSOLE *) *((int *) 0x0fec);
    switch(edx)
    {
    case 1:
        cons_putchar(cons, eax &amp; 0xff, 1);
        break;
    case 2:
        cons_putstr0(cons, (char *)ebx + cs_base);
        break;
    case 3:
        cons_putstr1(cons, (char *)ebx + cs_base, ecx);
        break;
    default:
        break;
    }
    return;
}
</code></pre>
<p>加上这个地址之后，就能正确显示字符串了。</p>
<h1 id="用C语言编写应用程序"><a href="#用C语言编写应用程序" class="headerlink" title="用C语言编写应用程序"></a>用C语言编写应用程序</h1><blockquote>
<p>harib18b</p>
</blockquote>
<p>就按目前的版本写好了。<br>首先是一个简单的应用程序</p>
<pre><code class="c">void api_putchar(int c);

void HariMain(void)
{
    api_putchar(&#39;A&#39;);
    return;
}
</code></pre>
<p>但是光这样写还不够，我们需要指定函数的入口地址（根据猜测的话，这个代码并不是在文件开始的位置存放的），简单来说就是把开始的6个字节进行替换（替换成之前说的汇编指令）。<br>为了省事起见，在我们执行应用程序的时候帮它改一下。</p>
<pre><code class="c">if(finfo-&gt;size &gt;= 8 &amp;&amp; strncmp(p + 4, &quot;Hari&quot;, 4) == 0)
{
    p[0] = 0xe8;
    p[1] = 0x16;
    p[2] = 0x00;
    p[3] = 0x00;
    p[4] = 0x00;
    p[5] = 0xcb;
}
</code></pre>
<p>这样就能正确打开应用程序了。</p>
<h1 id="保护操作系统（1）"><a href="#保护操作系统（1）" class="headerlink" title="保护操作系统（1）"></a>保护操作系统（1）</h1><blockquote>
<p>harib18c</p>
</blockquote>
<p>目前的操作系统还没有添加任何保护功能，所以像这样的代码</p>
<pre><code class="c">void HariMain(void)
{
    *((char *)0x00102600) = 0;
    return;
}
</code></pre>
<p>就可以搞崩操作系统。。</p>
<h1 id="保护操作系统（2）"><a href="#保护操作系统（2）" class="headerlink" title="保护操作系统（2）"></a>保护操作系统（2）</h1><blockquote>
<p>harib18d</p>
</blockquote>
<p>首先，分配一些空间给应用程序</p>
<pre><code class="c">q = (char *)memman_alloc_4k(memman, 64 * 1024);
set_segmdesc(gdt + 1004, 64 * 1024 - 1, (int)q, AR_DATA32_RW);
start_app(0, 1003 * 8, 64 * 1024, 1004 * 8);
memman_free_4k(memman, (int)q, 64 * 1024);
</code></pre>
<p>然后是软件实现的启动到用户态。(因为最后搞成硬件实现了，这段就相当于是补充了)</p>
<pre><code class="c">_start_app:        ; void start_app(int eip, int cs, int esp, int ds);
        PUSHAD        ; 将32位寄存器的值全部保存起来
        MOV        EAX,[ESP+36]    ; 应用程序用EIP
        MOV        ECX,[ESP+40]    ; 应用程序用CS
        MOV        EDX,[ESP+44]    ; 应用程序用ESP
        MOV        EBX,[ESP+48]    ; 应用程序DS/SS
        MOV        [0xfe4],ESP        ; 操作系统用ESP
        CLI            ; 在切换过程中禁止中断请求
        MOV        ES,BX
        MOV        SS,BX
        MOV        DS,BX
        MOV        FS,BX
        MOV        GS,BX
        MOV        ESP,EDX
        STI            ; 切换完成后恢复中断请求
        PUSH    ECX                ; 用于far-CALL的PUSH（cs）
        PUSH    EAX                ; 用于far-CALL的PUSH（eip）
        CALL    FAR [ESP]        ; 调用应用程序

;    应用程序结束后返回此处

        MOV        EAX,1*8            ; 操作系统用DS/SS
        CLI            ; 再次进行切换，禁止中断请求
        MOV        ES,AX
        MOV        SS,AX
        MOV        DS,AX
        MOV        FS,AX
        MOV        GS,AX
        MOV        ESP,[0xfe4]
        STI            ; 切换完成后恢复中断请求
        POPAD    ; 恢复之前保存的寄存器值
        RET
</code></pre>
<p>简而言之，我们一开始保存了操作系统的各种寄存器状态，转到应用程序所在的内存；当运行完毕之后，再恢复操作系统的各种寄存器状态，调转到操作系统。<br>之后还要修改API，因为API是应用程序调用的，需要切换到操作系统状态</p>
<pre><code class="c">_asm_hrb_api:
        ; 为方便起见从开头就禁止中断请求
        PUSH    DS
        PUSH    ES
        PUSHAD        ; 用于保存的PUSH
        MOV        EAX,1*8
        MOV        DS,AX            ; 先仅将DS设定为操作系统用
        MOV        ECX,[0xfe4]        ; 操作系统的ESP
        ADD        ECX,-40
        MOV        [ECX+32],ESP    ; 保存应用程序的ESP
        MOV        [ECX+36],SS        ; 保存应用程序的SS

; 将PUSHAD后的值复制到系统栈
        MOV        EDX,[ESP   ]
        MOV        EBX,[ESP+ 4]
        MOV        [ECX   ],EDX    ; 复制传递给hrb_api
        MOV        [ECX+ 4],EBX    ; 复制传递给hrb_api
        MOV        EDX,[ESP+ 8]
        MOV        EBX,[ESP+12]
        MOV        [ECX+ 8],EDX    ; 复制传递给hrb_api
        MOV        [ECX+12],EBX    ; 复制传递给hrb_api
        MOV        EDX,[ESP+16]
        MOV        EBX,[ESP+20]
        MOV        [ECX+16],EDX    ; 复制传递给hrb_api
        MOV        [ECX+20],EBX    ; 复制传递给hrb_api
        MOV        EDX,[ESP+24]
        MOV        EBX,[ESP+28]
        MOV        [ECX+24],EDX    ; 复制传递给hrb_api
        MOV        [ECX+28],EBX    ; 复制传递给hrb_api

        MOV        ES,AX            ; 将剩余的段寄存器也设为操作系统用
        MOV        SS,AX
        MOV        ESP,ECX
        STI            ; 恢复中断请求

        CALL    _hrb_api

        MOV        ECX,[ESP+32]    ; 取出应用程序的ESP
        MOV        EAX,[ESP+36]    ; 取出应用程序的SS
        CLI
        MOV        SS,AX
        MOV        ESP,ECX
        POPAD
        POP        ES
        POP        DS
        IRETD        ; 这个命令会自动执行STI
</code></pre>
<p>确实有点看不懂。。大概的意思就是存储好应用程序的寄存器值之后，切换到操作系统状态。<br>接下来是中断的部分，如果应用程序产生了中断请求，同样也需要切换到内核态。</p>
<pre><code class="c">_asm_inthandler20:
        PUSH    ES
        PUSH    DS
        PUSHAD
        MOV        AX,SS
        CMP        AX,1*8
        JNE        .from_app
;    当操作系统活动时产生的中断情况和之前差不多
        MOV        EAX,ESP
        PUSH    SS                ; 保存中断时的SS
        PUSH    EAX                ; 保存中断时的ESP
        MOV        AX,SS
        MOV        DS,AX
        MOV        ES,AX
        CALL    _inthandler20
        ADD        ESP,8
        POPAD
        POP        DS
        POP        ES
        IRETD
.from_app:
;    当应用程序活动时发生中断
        MOV        EAX,1*8
        MOV        DS,AX            ; 先仅将DS设定为操作系统用
        MOV        ECX,[0xfe4]        ; 操作系统的ESP
        ADD        ECX,-8
        MOV        [ECX+4],SS        ; 保存中断时的SS
        MOV        [ECX  ],ESP        ; 保存中断时的ESP
        MOV        SS,AX
        MOV        ES,AX
        MOV        ESP,ECX
        CALL    _inthandler20
        POP        ECX
        POP        EAX
        MOV        SS,AX            ; 将SS设回应用程序用
        MOV        ESP,ECX            ; 将ESP设回应用程序用
        POPAD
        POP        DS
        POP        ES
        IRETD
</code></pre>
<p>其实差不多，都是一个寄存器的切换。<br>虽然这些代码很快就被废弃掉了，但是给我们提供了一个软件实现保护的视角）</p>
<h1 id="对异常的支持"><a href="#对异常的支持" class="headerlink" title="对异常的支持"></a>对异常的支持</h1><blockquote>
<p>harib18e</p>
</blockquote>
<p>硬件层面上，0x0d是异常中断</p>
<pre><code class="c">_asm_inthandler0d:
        STI
        PUSH    ES
        PUSH    DS
        PUSHAD
        MOV        AX,SS
        CMP        AX,1*8
        JNE        .from_app
;    当操作系统活动时产生中断的情况和之前差不多
        MOV        EAX,ESP
        PUSH    SS                ; 保存中断时的ES
        PUSH    EAX                ; 保存中断时的ESP
        MOV        AX,SS
        MOV        DS,AX
        MOV        ES,AX
        CALL    _inthandler0d
        ADD        ESP,8
        POPAD
        POP        DS
        POP        ES
        ADD        ESP,4            ; 在INT 0x0d中需要这句
        IRETD
.from_app:
;    当应用程序活动时产生中断
        CLI
        MOV        EAX,1*8
        MOV        DS,AX            ; 先仅将DS设定为操作系统用
        MOV        ECX,[0xfe4]        ; 操作系统的ESP
        ADD        ECX,-8
        MOV        [ECX+4],SS        ; 保存产生中断时的SS
        MOV        [ECX  ],ESP        ; 保存产生中断时的ESP
        MOV        SS,AX
        MOV        ES,AX
        MOV        ESP,ECX
        STI
        CALL    _inthandler0d
        CLI
        CMP        EAX,0
        JNE        .kill
        POP        ECX
        POP        EAX
        MOV        SS,AX            ; 将SS恢复为应用程序用
        MOV        ESP,ECX            ; 将ESP恢复为应用程序用
        POPAD
        POP        DS
        POP        ES
        ADD        ESP,4            ; INT 0x0d需要这句
        IRETD
.kill:
;    将应用程序强制结束
        MOV        EAX,1*8            ; 操作系统用的DS/SS
        MOV        ES,AX
        MOV        SS,AX
        MOV        DS,AX
        MOV        FS,AX
        MOV        GS,AX
        MOV        ESP,[0xfe4]        ; 强制返回start_app时的ESP
        STI            ; 切换完成后恢复中断请求
        POPAD    ; 恢复事先保存的寄存器值
        RET
</code></pre>
<p>这个中断可以做到杀掉进程，之后强制返回到cmd_app</p>
<pre><code class="c">int inthandler0d(int *esp)
{
    struct CONSOLE *cons = (struct CONSOLE *)*((int *)0x0fec);
    cons_putstr0(cons, &quot;\nINT 0D :\n General Protected Exception.\n&quot;);
    return 1; // 强制结束程序
}
</code></pre>
<p>然后注册到IDT里</p>
<pre><code class="c">set_gatedesc(idt + 0x0d, (int) asm_inthandler0d, 2 * 8, AR_INTGATE32);
</code></pre>
<p>方便我们之后继续保护操作系统</p>
<h1 id="保护操作系统（3）"><a href="#保护操作系统（3）" class="headerlink" title="保护操作系统（3）"></a>保护操作系统（3）</h1><blockquote>
<p>harib18f</p>
</blockquote>
<p>这次的目的是禁止汇编层面上随便指定段号</p>
<h1 id="保护操作系统（4）"><a href="#保护操作系统（4）" class="headerlink" title="保护操作系统（4）"></a>保护操作系统（4）</h1><blockquote>
<p>harib18g</p>
</blockquote>
<p>在硬件层面上，如果把访问权限加上0x60，就代表这个段为应用程序用。如果段内的代码想要存入操作系统的段地址，就会产生异常。</p>
<pre><code class="c">struct TASK *task = task_now();

set_segmdesc(gdt + 1003, finfo-&gt;size - 1, (int)p, AR_CODE32_ER + 0x60);
set_segmdesc(gdt + 1004, 64 * 1024 - 1, (int)q, AR_DATA32_RW + 0x60);
start_app(0, 1003 * 8, 64 * 1024, 1004 * 8, &amp;(task-&gt;tss.esp0));
</code></pre>
<p>但是这样的话，x86规定既不能操作系统CALL应用程序，也不能far-JMP到应用程序，可做的就只有RETF了。</p>
<pre><code class="c">_start_app:        ; void start_app(int eip, int cs, int esp, int ds, int *tss_esp0);
        PUSHAD        ; 将32位寄存器的值全部保存下来
        MOV        EAX,[ESP+36]    ; 应用程序用EIP
        MOV        ECX,[ESP+40]    ; 应用程序用CS
        MOV        EDX,[ESP+44]    ; 应用程序用ESP
        MOV        EBX,[ESP+48]    ; 应用程序用DS/SS
        MOV        EBP,[ESP+52]    ; tss.esp0的地址
        MOV        [EBP  ],ESP        ; 保存操作系统用ESP
        MOV        [EBP+4],SS        ; 保存操作系统用SS
        MOV        ES,BX
        MOV        DS,BX
        MOV        FS,BX
        MOV        GS,BX
;    下面调整栈，以免用RETF跳转到应用程序
        OR        ECX,3            ; 将应用程序用段号和3进行或运算（据作者说是为了调用RETF而用的小技巧）
        OR        EBX,3            ; 将应用程序用段号和3进行或运算
        PUSH    EBX                ; 应用程序的SS
        PUSH    EDX                ; 应用程序的ESP
        PUSH    ECX                ; 应用程序的CS
        PUSH    EAX                ; 应用程序的EIP
        RETF
;    应用程序结束后不会回到这里
</code></pre>
<p>之后也要修改API</p>
<pre><code class="c">_asm_hrb_api:
        STI
        PUSH    DS
        PUSH    ES
        PUSHAD        ; 用于保存的PSUH
        PUSHAD        ; 用于向hrb_api传值的PUSH
        MOV        AX,SS
        MOV        DS,AX        ; 将操作系统用段地址存入DS和ES
        MOV        ES,AX
        CALL    _hrb_api
        CMP        EAX,0        ; 当EAX不为0时程序结束
        JNE        end_app
        ADD        ESP,32
        POPAD
        POP        ES
        POP        DS
        IRETD
end_app:
;    EAX为tss.esp0的地址
        MOV        ESP,[EAX]
        POPAD
        RET                    ; 返回cmd_app
</code></pre>
<p>硬件帮我们实现了各种栈操作，因此就比较简短了</p>
<p>做一个用于结束的API</p>
<pre><code class="c">int* hrb_api(int edi, int esi, int ebp, int esp, int ebx, int edx, int ecx, int eax)
{
    int cs_base = *((int *)0xfe8);
    struct CONSOLE *cons = (struct CONSOLE *) *((int *) 0x0fec);
    struct TASK *task = task_now();
    switch(edx)
    {
    case 1:
        cons_putchar(cons, eax &amp; 0xff, 1);
        break;
    case 2:
        cons_putstr0(cons, (char *)ebx + cs_base);
        break;
    case 3:
        cons_putstr1(cons, (char *)ebx + cs_base, ecx);
        break;
    case 4:
        return &amp;(task-&gt;tss.esp0);
        break;
    default:
        break;
    }
    return 0;
}
</code></pre>
<p>然后修改0x0d的中断服务程序</p>
<pre><code class="c">int *inthandler0d(int *esp)
{
    struct CONSOLE *cons = (struct CONSOLE *) *((int *) 0x0fec);
    struct TASK *task = task_now();
    cons_putstr0(cons, &quot;\nINT 0D :\n General Protected Exception.\n&quot;);
    return &amp;(task-&gt;tss.esp0);    // 让程序强制结束
}
</code></pre>
<p>之后是把各种中断处理改回之前的版本，因为CPU帮我们切换了栈</p>
<pre><code class="c">_asm_inthandler0d:
        STI
        PUSH    ES
        PUSH    DS
        PUSHAD
        MOV        EAX,ESP
        PUSH    EAX
        MOV        AX,SS
        MOV        DS,AX
        MOV        ES,AX
        CALL    _inthandler0d
        CMP        EAX,0        ; 只有这里不同
        JNE        end_app        ; 只有这里不同
        POP        EAX
        POPAD
        POP        DS
        POP        ES
        ADD        ESP,4            ; 在INT 0x0d中需要这句
        IRETD
</code></pre>
<p>最后，仅将API中断开放给用户使用</p>
<pre><code class="c">set_gatedesc(idt + 0x40, (int) asm_hrb_api,      2 * 8, AR_INTGATE32 + 0x60);
</code></pre>
<p>当各种应用程序结束的时候，调用</p>
<pre><code class="c">MOV EDX, 4
INT 0x40
</code></pre>
<p>即可。</p>
<p>今天的汇编比较多。。看着比较麻烦）。。</p>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 来必力 -->
<div id="livere-comment">
    <div id="lv-container" data-id="city" data-uid="MTAyMC8zNzY3Ni8xNDIwNw==">
	<script type="text/ls-javascript" id="livere-comment-js">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];
       if (typeof LivereTower === 'function') { return; }
       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;
       e.parentNode.insertBefore(j, e);
   })(document, 'script');
	</script>
</div>
</div>
<style>
    #livere-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/blog/OS/day22/index.html/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/blog/OS/day20/index.html/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/blog/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/blog/img/1590.png" alt="CCDV2's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        ccdv21999@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto: ccdv21999@gmail.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/blog/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/blog/archives/2019/11/">十一月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2019/05/">五月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2019/04/">四月 2019<span class="sidebar_archives-count">12</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2019/03/">三月 2019<span class="sidebar_archives-count">16</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2019/01/">一月 2019<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2018/12/">十二月 2018<span class="sidebar_archives-count">24</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2018/11/">十一月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2018/09/">九月 2018<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2018/08/">八月 2018<span class="sidebar_archives-count">14</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2018/07/">七月 2018<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2018/06/">六月 2018<span class="sidebar_archives-count">4</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/blog/categories/CG/">CG<span class="sidebar_archives-count">17</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/CG/openGL/">openGL<span class="sidebar_archives-count">17</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/CV/">CV<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/CV/分类算法/">分类算法<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/CV/神经网络/">神经网络<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/CV/神经网络/分类算法/">分类算法<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/OS/">OS<span class="sidebar_archives-count">29</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/VHDL/">VHDL<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/">acm<span class="sidebar_archives-count">29</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/IO/">IO<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/dfs/">dfs<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/dfs/剪枝/">剪枝<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/博弈论/">博弈论<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/字符串/">字符串<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/数学/">数学<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/数据结构/">数据结构<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/网络流/">网络流<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/计算几何/">计算几何<span class="sidebar_archives-count">17</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>CCDV2's nest
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/blog/js/lazyload.min.js?wgjW/HuQG9JDgvPDPoRAng==", true)</script>



    <script>lsloader.load("js_js","/blog/js/js.min.js?d+XW6aNuIPgOn1iA7NnB4g==", true)</script>



    <script>lsloader.load("np_js","/blog/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>









   





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/blog/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/blog/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
