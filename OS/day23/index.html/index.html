<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">





        <link rel="dns-prefetch" href="https://cdn-city.livere.com"/>










    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            Day23 | 
        
        CCDV2&#39;s nest
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/1590.png">
    <link rel="icon" href="/img/1590.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="今天的话主要在提供各种窗口相关的API，以及最后对于强制结束程序的完善。">
    <meta name="keywords" content=",OS">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?MKetZV3cUTfDxvMffaOezg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/css/prettify/atelier-seaside-light.min.css?b71t6V/NeTk95fu056Paxw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-image: url(/img/bg3.png);
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?ezyEvm8ST5CGfpA+kFFi1g==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="CCDV2&#39;s nest">
    <meta name="msapplication-starturl" content="https://ccdv2.github.io/OS/day23//">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="CCDV2&#39;s nest">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/img/1590.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://ccdv2.github.io/OS/day23//">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Day23 | CCDV2&#39;s nest">
    <meta property="og:image" content="/img/1590.png">
    <meta property="og:description" content="今天的话主要在提供各种窗口相关的API，以及最后对于强制结束程序的完善。">
    <meta property="og:article:tag" content="OS"> 

    
        <meta property="article:published_time" content="Sat Apr 20 2019 14:39:58 GMT+0800">
        <meta property="article:modified_time" content="Sat Apr 20 2019 18:34:34 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://ccdv2.github.io/OS/day23/index.html/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "https://ccdv2.github.io/OS/day23/index.html/index.html",
    "headline": "Day23",
    "datePublished": "Sat Apr 20 2019 14:39:58 GMT+0800",
    "dateModified": "Sat Apr 20 2019 18:34:34 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "CCDV2",
        "image": {
            "@type": "ImageObject",
            "url": "/img/1590.png"
        },
        "description": "高海千歌 is the 最高！（大雾）"
    },
    "publisher": {
        "@type": "Organization",
        "name": "CCDV2&#39;s nest",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/1590.png"
        }
    },
    "keywords": ",OS",
    "description": "今天的话主要在提供各种窗口相关的API，以及最后对于强制结束程序的完善。",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span id="MD-burger-id" class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#一些感想和问题"><span class="post-toc-number">1.</span> <span class="post-toc-text">一些感想和问题</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#应用程序的malloc"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">应用程序的malloc</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#强制结束时释放资源"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">强制结束时释放资源</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#free去哪里了？"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">free去哪里了？</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#编写malloc"><span class="post-toc-number">2.</span> <span class="post-toc-text">编写malloc</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#画点"><span class="post-toc-number">3.</span> <span class="post-toc-text">画点</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#刷新窗口"><span class="post-toc-number">4.</span> <span class="post-toc-text">刷新窗口</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#画直线"><span class="post-toc-number">5.</span> <span class="post-toc-text">画直线</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#关闭窗口"><span class="post-toc-number">6.</span> <span class="post-toc-text">关闭窗口</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#键盘输入API"><span class="post-toc-number">7.</span> <span class="post-toc-text">键盘输入API</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#用键盘输入来消遣一下"><span class="post-toc-number">8.</span> <span class="post-toc-text">用键盘输入来消遣一下</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#强制结束并关闭窗口"><span class="post-toc-number">9.</span> <span class="post-toc-text">强制结束并关闭窗口</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                Day23
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/1590.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>CCDV2</strong>
        <span>4月 20, 2019</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/OS/">OS</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Day23&url=https://ccdv2.github.io/OS/day23/index.html/index.html&pic=https://ccdv2.github.io/img/1590.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Day23&url=https://ccdv2.github.io/OS/day23/index.html/index.html&via=CCDV2" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://ccdv2.github.io/OS/day23/index.html/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://ccdv2.github.io/OS/day23/index.html/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>今天的话主要在提供各种窗口相关的API，以及最后对于强制结束程序的完善。<br><a id="more"></a></p>
<h1 id="一些感想和问题"><a href="#一些感想和问题" class="headerlink" title="一些感想和问题"></a>一些感想和问题</h1><h2 id="应用程序的malloc"><a href="#应用程序的malloc" class="headerlink" title="应用程序的malloc"></a>应用程序的malloc</h2><p>这次做的是应用程序需要的malloc，目前的做法是从一个较大的应用程序数据段中拿一部分给应用程序，以后看起来还会改进</p>
<h2 id="强制结束时释放资源"><a href="#强制结束时释放资源" class="headerlink" title="强制结束时释放资源"></a>强制结束时释放资源</h2><p>当应用程序通过API申请某些系统资源的时候，将其与任务绑定。若任务结束后，这些资源仍没被释放，则由操作系统进行释放</p>
<h2 id="free去哪里了？"><a href="#free去哪里了？" class="headerlink" title="free去哪里了？"></a>free去哪里了？</h2><p>虽然api提供了free，但是却没有看到在后面的函数使用free。。不太明白为什么</p>
<p>今天主要是功能性的更新，所以开始的总结比较少</p>
<h1 id="编写malloc"><a href="#编写malloc" class="headerlink" title="编写malloc"></a>编写malloc</h1><p>定义各种API</p>
<ul>
<li>memman初始化<br>EDX=8<br>EBX=memman的地址<br>EAX=memman所管理的内存空间的起始地址<br>ECX=memman所管理的内存空间的字节数</li>
<li>malloc<br>EDX=9<br>EBX=memman的地址<br>ECX=需要请求的字节数<br>EAX=分配到的内存空间地址</li>
<li>free<br>EDX=10<br>EBX=memman的地址<br>EAX=需要释放的内存空间地址<br>ECX=需要释放的字节数</li>
</ul>
<pre><code class="c">case 8:
    memman_init((struct MEMMAN *)(ebx + ds_base));
    ecx &amp;= 0xfffffff0;    // 以16字节为单位
    memman_free((struct MEMMAN *)(ebx + ds_base), eax, ecx);
    break;
case 9:
    ecx = (ecx + 0x0f) &amp; 0xfffffff0; // 以16字节为单位进位取整
    reg[7] = memman_alloc((struct MEMMAN *)(ebx + ds_base), ecx);
    break;
case 10:
    ecx = (ecx + 0x0f) &amp; 0xfffffff0; // 以16字节为单位进位取整
    memman_free((struct MEMMAN *)(ebx + ds_base), eax, ecx);
    break;
</code></pre>
<pre><code class="c">_api_initmalloc:    ; void api_initmalloc(void);
        PUSH    EBX
        MOV        EDX,8
        MOV        EBX,[CS:0x0020]        ; malloc内存空间的地址
        MOV        EAX,EBX
        ADD        EAX,32*1024            ; 加上32KB
        MOV        ECX,[CS:0x0000]        ; 数据段的大小
        SUB        ECX,EAX
        INT        0x40
        POP        EBX
        RET

_api_malloc:        ; char *api_malloc(int size);
        PUSH    EBX
        MOV        EDX,9
        MOV        EBX,[CS:0x0020]
        MOV        ECX,[ESP+8]            ; size
        INT        0x40
        POP        EBX
        RET

_api_free:            ; void api_free(char *addr, int size);
        PUSH    EBX
        MOV        EDX,10
        MOV        EBX,[CS:0x0020]
        MOV        EAX,[ESP+ 8]        ; addr
        MOV        ECX,[ESP+12]        ; size
        INT        0x40
        POP        EBX
        RET
</code></pre>
<p>然后编写一下测试程序试试</p>
<pre><code class="c">void HariMain(void)
{
    char *buf;
    int win;

    api_initmalloc();
    buf = api_malloc(150 * 50);
    win = api_openwin(buf, 150, 50, -1, &quot;hello&quot;);
    api_boxfilwin(win,  8, 36, 141, 43, 6 /* 浅蓝色 */);
    api_putstrwin(win, 28, 28, 0 /* 黑色 */, 12, &quot;hello, world&quot;);
    api_end();
}
</code></pre>
<h1 id="画点"><a href="#画点" class="headerlink" title="画点"></a>画点</h1><blockquote>
<p>harib20b</p>
</blockquote>
<p>画点API<br>在窗口中画点<br>EDX=11<br>EBX=窗口句柄<br>ESI=显示位置的x坐标<br>EDI=显示位置的y坐标<br>EAX=色号</p>
<pre><code class="c">case 11:
    sht = (struct SHEET *)ebx;
    sht-&gt;buf[sht-&gt;bxsize * edi + esi] = eax;
    sheet_refresh(sht, esi, edi, esi + 1, edi + 1);
    break;
</code></pre>
<pre><code class="c">_api_point:        ; void api_point(int win, int x, int y, int col);
        PUSH    EDI
        PUSH    ESI
        PUSH    EBX
        MOV        EDX,11
        MOV        EBX,[ESP+16]    ; win
        MOV        ESI,[ESP+20]    ; x
        MOV        EDI,[ESP+24]    ; y
        MOV        EAX,[ESP+28]    ; col
        INT        0x40
        POP        EBX
        POP        ESI
        POP        EDI
        RET
</code></pre>
<p>测试程序</p>
<pre><code class="c">void HariMain(void)
{
    char *buf;
    int win;
    api_initmalloc();
    buf = api_malloc(150 * 100);
    win = api_openwin(buf, 150, 100, -1, &quot;star1&quot;);
    api_boxfilwin(win,  6, 26, 143, 93, 0 /* 黑色 */);
    api_point(win, 75, 59, 3 /* 黄色 */);
    api_end();
}
</code></pre>
<pre><code class="c">void HariMain(void)
{
    char *buf;
    int win, i, x, y;
    api_initmalloc();
    buf = api_malloc(150 * 100);
    win = api_openwin(buf, 150, 100, -1, &quot;stars&quot;);
    api_boxfilwin(win,  6, 26, 143, 93, 0 /* 黑色 */);
    for(i = 0; i &lt; 50; ++i)
    {
        x = (rand() % 137) + 6;
        y = (rand() % 67) + 26;
        api_point(win, x, y, 3 /* 黄色 */);
    }
    api_end();
}
</code></pre>
<p>在屏幕上点了好多个点。。</p>
<h1 id="刷新窗口"><a href="#刷新窗口" class="headerlink" title="刷新窗口"></a>刷新窗口</h1><blockquote>
<p>harib20c</p>
</blockquote>
<p>每次调用点都要重新刷新，太慢了<br>所以添加一个刷新的API，同时修改之前的API，可以指定是否刷新<br>刷新窗口<br>EDX=12<br>EBX=窗口句柄<br>EAX=x0<br>ECX=y0<br>ESI=x1<br>EDI=y1</p>
<pre><code class="c">case 6:
    sht = (struct SHEET *)(ebx &amp; 0xfffffffe);
    putfonts8_asc(sht-&gt;buf, sht-&gt;bxsize, esi, edi, eax, (char *)ebp + ds_base);
    if((ebx &amp; 1) == 0)
    {
        sheet_refresh(sht, esi, edi, esi + ecx * 8, edi + 16);
    }
    break;
case 7:
    sht = (struct SHEET *)(ebx &amp; 0xfffffffe);
    boxfill8(sht-&gt;buf, sht-&gt;bxsize, ebp, eax, ecx, esi, edi);
    if((ebx &amp; 1) == 0)
    {
        sheet_refresh(sht, eax, ecx, esi + 1, edi + 1);
    }
    break;
...
case 11:
    sht = (struct SHEET *)(ebx &amp; 0xfffffffe);
    sht-&gt;buf[sht-&gt;bxsize * edi + esi] = eax;
    if((ebx &amp; 1) == 0)
    {
        sheet_refresh(sht, esi, edi, esi + 1, edi + 1);
    }
    break;
case 12:
    sht = (struct SHEET *)ebx;
    sheet_refresh(sht, eax, ecx, esi, edi);
    break;
</code></pre>
<p>通过偏移1位SHT，之后在判断是否需要刷新的时候，如果不是2的倍数，则ebx &amp; 1就为0，不进行刷新。</p>
<pre><code class="c">_api_refreshwin:    ; void api_refreshwin(int win, int x0, int y0, int x1, int y1);
        PUSH    EDI
        PUSH    ESI
        PUSH    EBX
        MOV        EDX,12
        MOV        EBX,[ESP+16]    ; win
        MOV        EAX,[ESP+20]    ; x0
        MOV        ECX,[ESP+24]    ; y0
        MOV        ESI,[ESP+28]    ; x1
        MOV        EDI,[ESP+32]    ; y1
        INT        0x40
        POP        EBX
        POP        ESI
        POP        EDI
        RET
</code></pre>
<p>测试程序</p>
<pre><code class="c">void HariMain(void)
{
    char *buf;
    int win, i, x, y;
    api_initmalloc();
    buf = api_malloc(150 * 100);
    win = api_openwin(buf, 150, 100, -1, &quot;stars2&quot;);
    api_boxfilwin(win + 1,  6, 26, 143, 93, 0 /* 黑色 */);
    for(i = 0; i &lt; 50; ++i)
    {
        x = (rand() % 137) +  6;
        y = (rand() %  67) + 26;
        api_point(win + 1, x, y, 3 /* 黄色 */);
    }
    api_refreshwin(win,  6, 26, 144, 94);
    api_end();
}
</code></pre>
<h1 id="画直线"><a href="#画直线" class="headerlink" title="画直线"></a>画直线</h1><blockquote>
<p>harib20d</p>
</blockquote>
<p>貌似现在还不能使用浮点数。作者提供的方法是预先放大坐标1024倍（凑个整）之后每次增加dx,dy<br>在窗口上画直线<br>EDX=13<br>EBX=窗口句柄<br>EAX=x0<br>ECX=y0<br>ESI=x1<br>EDI=y1<br>EBP=色号</p>
<pre><code class="c">case 13:
    sht = (struct SHEET *)(ebx &amp; 0xfffffffe);
    hrb_api_linewin(sht, eax, ecx, esi, edi, ebp);
    if((ebx &amp; 1) == 0)
    {
        sheet_refresh(sht, eax, ecx, esi + 1, edi + 1);
    }
    break;
</code></pre>
<pre><code class="c">void hrb_api_linewin(struct SHEET *sht, int x0, int y0, int x1, int y1, int col)
{
    int i, x, y, len, dx, dy;

    dx = x1 - x0;
    dy = y1 - y0;
    x = x0 &lt;&lt; 10;
    y = y0 &lt;&lt; 10;
    if(dx &lt; 0)
    {
        dx = -dx;
    }
    if(dy &lt; 0)
    {
        dy = -dy;
    }
    if(dx &gt;= dy)
    {
        len = dx + 1;
        if(x0 &gt; x1)
        {
            dx = -1024;
        }
        else
        {
            dx = 1024;
        }
        if(y0 &lt;= y1)
        {
            dy = ((y1 - y0 + 1) &lt;&lt; 10) / len;
        }
        else
        {
            dy = ((y1 - y0 - 1) &lt;&lt; 10) / len;
        }
    }
    else
    {
        len = dy + 1;
        if(y0 &gt; y1)
        {
            dy = -1024;
        }
        else
        {
            dy = 1024;
        }
        if(x0 &lt;= x1)
        {
            dx = ((x1 - x0 + 1) &lt;&lt; 10) / len;
        }
        else
        {
            dx = ((x1 - x0 - 1) &lt;&lt; 10) / len;
        }
    }

    for(i = 0; i &lt; len; i++)
    {
        sht-&gt;buf[(y &gt;&gt; 10) * sht-&gt;bxsize + (x &gt;&gt; 10)] = col;
        x += dx;
        y += dy;
    }
    return;
}
</code></pre>
<p>总的来说，就是在变化量较小的方向上变化1个像素。其实图形学的书貌似也有这个算法）<br>然后是汇编调用</p>
<pre><code class="c">_api_linewin:        ; void api_linewin(int win, int x0, int y0, int x1, int y1, int col);
        PUSH    EDI
        PUSH    ESI
        PUSH    EBP
        PUSH    EBX
        MOV        EDX,13
        MOV        EBX,[ESP+20]    ; win
        MOV        EAX,[ESP+24]    ; x0
        MOV        ECX,[ESP+28]    ; y0
        MOV        ESI,[ESP+32]    ; x1
        MOV        EDI,[ESP+36]    ; y1
        MOV        EBP,[ESP+40]    ; col
        INT        0x40
        POP        EBX
        POP        EBP
        POP        ESI
        POP        EDI
        RET
</code></pre>
<p>最后是测试程序</p>
<pre><code class="c">void HariMain(void)
{
    char *buf;
    int win, i;
    api_initmalloc();
    buf = api_malloc(160 * 100);
    win = api_openwin(buf, 160, 100, -1, &quot;lines&quot;);
    for(i = 0; i &lt; 8; ++i)
    {
        api_linewin(win + 1,  8, 26, 77, i * 9 + 26, i);
        api_linewin(win + 1, 88, 26, i * 9 + 88, 89, i);
    }
    api_refreshwin(win,  6, 26, 154, 90);
    api_end();
}
</code></pre>
<p>没什么问题。。</p>
<h1 id="关闭窗口"><a href="#关闭窗口" class="headerlink" title="关闭窗口"></a>关闭窗口</h1><blockquote>
<p>harib20e</p>
</blockquote>
<p>虽然可以结束应用程序，但是窗口却没有被释放，所以仍然留在屏幕上。<br>添加一个关闭窗口的API<br>关闭窗口<br>EDX=14<br>EBX=窗口句柄</p>
<pre><code class="c">case 14:
    sheet_free((struct SHEET *)ebx);
    break;
</code></pre>
<p>汇编调用</p>
<pre><code class="c">_api_closewin:        ; void api_closewin(int win);
        PUSH    EBX
        MOV        EDX,14
        MOV        EBX,[ESP+8]    ; win
        INT        0x40
        POP        EBX
        RET
</code></pre>
<p>测试程序</p>
<pre><code class="c">void HariMain(void)
{
    char *buf;
    int win, i;
    api_initmalloc();
    buf = api_malloc(160 * 100);
    win = api_openwin(buf, 160, 100, -1, &quot;lines&quot;);
    for(i = 0; i &lt; 8; ++i)
    {
        api_linewin(win + 1,  8, 26, 77, i * 9 + 26, i);
        api_linewin(win + 1, 88, 26, i * 9 + 88, 89, i);
    }
    api_refreshwin(win,  6, 26, 154, 90);
    api_closewin(win);
    api_end();
}
</code></pre>
<p>多了一个close，但是这样一开始就被关闭了。。更严格地说，应用程序一开始就结束了，留下了没被释放的窗口在屏幕上。所以我们其实应该等待一个。。输入再结束应用程序</p>
<h1 id="键盘输入API"><a href="#键盘输入API" class="headerlink" title="键盘输入API"></a>键盘输入API</h1><blockquote>
<p>harib20f</p>
</blockquote>
<p>当一个程序等待IO的时候，就让他顺便休眠吧。<br>键盘输入<br>EDX=15<br>EAX=0 没有键盘输入时返回-1，不休眠<br>EAX=1 休眠直到发生键盘输入<br>EAX=输入的字符编码</p>
<pre><code class="c">case 15:
    for(;;)
    {
        io_cli();
        if(fifo32_status(&amp;task-&gt;fifo) == 0)
        {
            if(eax != 0)
            {
                task_sleep(task);    // FIFO为空，休眠并等待
            }
            else
            {
                io_sti();
                reg[7] = -1;
                return 0;
            }
        }
        i = fifo32_get(&amp;task-&gt;fifo);
        io_sti();
        if(i &lt;= 1) // 光标用定时器
        {
            // 应用程序运行时不需要显示光标，因此总是将下次显示用的位置置为1
            timer_init(cons-&gt;timer, &amp;task-&gt;fifo, 1); // 下次置为1
            timer_settime(cons-&gt;timer, 50);
        }
        if(i == 2) // 光标ON
        {
            cons-&gt;cur_c = COL8_FFFFFF;
        }
        if(i == 3) // 光标OFF
        {
            cons-&gt;cur_c = -1;
        }
        if(256 &lt;= i &amp;&amp; i &lt;= 511) // 键盘数据（通过任务A）
        {
            reg[7] = i - 256;
            return 0;
        }
    }
    break;
</code></pre>
<p>当接收到键盘数据，或者FIFO为空的时候，会结束掉这个循环。<br>在</p>
<pre><code class="c">timer_init(cons-&gt;timer, &amp;task-&gt;fifo, 1);
</code></pre>
<p>这句中，timer加入到了cons里面，因此CONSOLE结构做了修改，同时console里的task的timer就去掉了。<br>然后是汇编接口</p>
<pre><code class="c">_api_getkey:        ; int api_getkey(int mode);
        MOV        EDX,15
        MOV        EAX,[ESP+4]    ; mode
        INT        0x40
        RET
</code></pre>
<p>测试程序</p>
<pre><code class="c">void HariMain(void)
{
    char *buf;
    int win, i;
    api_initmalloc();
    buf = api_malloc(160 * 100);
    win = api_openwin(buf, 160, 100, -1, &quot;lines&quot;);
    for(i = 0; i &lt; 8; ++i)
    {
        api_linewin(win + 1,  8, 26, 77, i * 9 + 26, i);
        api_linewin(win + 1, 88, 26, i * 9 + 88, 89, i);
    }
    api_refreshwin(win,  6, 26, 154, 90);
    for(;;)
    {
        if(api_getkey(1) == 0x0a)
        {
            break; // 按下回车键则break
        }
    }
    api_closewin(win);
    api_end();
}
</code></pre>
<p>这样在窗口关闭前，会等待一个enter的输入，之后才会关闭、结束</p>
<h1 id="用键盘输入来消遣一下"><a href="#用键盘输入来消遣一下" class="headerlink" title="用键盘输入来消遣一下"></a>用键盘输入来消遣一下</h1><blockquote>
<p>harib20g</p>
</blockquote>
<p>可以移动的*</p>
<pre><code class="c">void HariMain(void)
{
    char *buf;
    int win, i, x, y;
    api_initmalloc();
    buf = api_malloc(160 * 100);
    win = api_openwin(buf, 160, 100, -1, &quot;walk&quot;);
    api_boxfilwin(win, 4, 24, 155, 95, 0 /* 黑色 */);
    x = 76;
    y = 56;
    api_putstrwin(win, x, y, 3 /* 黄色 */, 1, &quot;*&quot;);
    for(;;)
    {
        i = api_getkey(1);
        api_putstrwin(win, x, y, 0 /* 黑色 */, 1, &quot;*&quot;); // 用黑色擦除
        if(i == &#39;4&#39; &amp;&amp; x &gt;   4) { x -= 8; }
        if(i == &#39;6&#39; &amp;&amp; x &lt; 148) { x += 8; }
        if(i == &#39;8&#39; &amp;&amp; y &gt;  24) { y -= 8; }
        if(i == &#39;2&#39; &amp;&amp; y &lt;  80) { y += 8; }
        if(i == 0x0a) { break; } // 按回车键结束
        api_putstrwin(win, x, y, 3 /* 黄色 */, 1, &quot;*&quot;);
    }
    api_closewin(win);
    api_end();
}
</code></pre>
<h1 id="强制结束并关闭窗口"><a href="#强制结束并关闭窗口" class="headerlink" title="强制结束并关闭窗口"></a>强制结束并关闭窗口</h1><blockquote>
<p>harib20h</p>
</blockquote>
<p>如果进行强制结束，程序会来不及执行关闭窗口的操作。<br>给出的一种解法是将图层和任务绑定，当有程序被强制结束时，若有图层是该任务的，则一同关闭。<br>首先在SHEET的结构体里添加task指针。在SHEET初始化的时候，默认task为0<br>当API申请图层的时候，将其与任务绑定</p>
<pre><code class="c">case 5:
    sht = sheet_alloc(shtctl);
    sht-&gt;task = task;
    sheet_setbuf(sht, (char *) ebx + ds_base, esi, edi, eax);
    make_window8((char *) ebx + ds_base, esi, edi, (char *) ecx + ds_base, 0);
    sheet_slide(sht, 100, 50);
    sheet_updown(sht, 3);    // 背景高度3位于task_a之上
    reg[7] = (int)sht;
    break;
</code></pre>
<p>在控制台start_app结束之后，增加查找SHEET的代码</p>
<pre><code class="c">shtctl = (struct SHTCTL *)*((int *) 0x0fe4);
for(i = 0; i &lt; MAX_SHEETS; ++i)
{
    sht = &amp;(shtctl-&gt;sheets0[i]);
    if(sht-&gt;flags != 0 &amp;&amp; sht-&gt;task == task)
    {
        // 找到被应用程序遗留的窗口
        sheet_free(sht);    // 关闭
    }
}
</code></pre>
<p>这样在忘记手动释放窗口的时候，也可以关闭窗口了。</p>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 来必力 -->
<div id="livere-comment">
    <div id="lv-container" data-id="city" data-uid="MTAyMC8zNzY3Ni8xNDIwNw==">
	<script type="text/ls-javascript" id="livere-comment-js">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];
       if (typeof LivereTower === 'function') { return; }
       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;
       e.parentNode.insertBefore(j, e);
   })(document, 'script');
	</script>
</div>
</div>
<style>
    #livere-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/OS/day24/index.html/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/OS/day22/index.html/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/1590.png" alt="CCDV2's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        ccdv21999@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto: ccdv21999@gmail.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2019/11/">十一月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/05/">五月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/04/">四月 2019<span class="sidebar_archives-count">12</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/03/">三月 2019<span class="sidebar_archives-count">16</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/01/">一月 2019<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/12/">十二月 2018<span class="sidebar_archives-count">24</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/11/">十一月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/09/">九月 2018<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/08/">八月 2018<span class="sidebar_archives-count">14</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/07/">七月 2018<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/archives/2018/06/">六月 2018<span class="sidebar_archives-count">4</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/CG/">CG<span class="sidebar_archives-count">17</span></a></li><li><a class="sidebar_archives-link" href="/categories/CG/openGL/">openGL<span class="sidebar_archives-count">17</span></a></li><li><a class="sidebar_archives-link" href="/categories/CV/">CV<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/categories/CV/分类算法/">分类算法<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/CV/神经网络/">神经网络<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/CV/神经网络/分类算法/">分类算法<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/OS/">OS<span class="sidebar_archives-count">29</span></a></li><li><a class="sidebar_archives-link" href="/categories/VHDL/">VHDL<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/acm/">acm<span class="sidebar_archives-count">29</span></a></li><li><a class="sidebar_archives-link" href="/categories/acm/IO/">IO<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/acm/dfs/">dfs<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/acm/dfs/剪枝/">剪枝<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/acm/博弈论/">博弈论<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/acm/字符串/">字符串<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/acm/数学/">数学<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/acm/数据结构/">数据结构<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/categories/acm/网络流/">网络流<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/acm/计算几何/">计算几何<span class="sidebar_archives-count">17</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>CCDV2's nest
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?wgjW/HuQG9JDgvPDPoRAng==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?d+XW6aNuIPgOn1iA7NnB4g==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>









   





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
