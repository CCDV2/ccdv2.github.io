<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.2 -->
    <script>
        window.materialVersion = "1.5.2"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1',
            '1.5.0'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">





        <link rel="dns-prefetch" href="https://cdn-city.livere.com"/>










    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="renderer" content="webkit">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!-- Title -->
    
    <title>
        
            Day22 | 
        
        CCDV2&#39;s nest
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/blog/img/1590.png">
    <link rel="icon" href="/blog/img/1590.png">

    <meta name="format-detection" content="telephone=no"/>
    <meta name="description" itemprop="description" content="今天继续完善保护操作系统，并且提供了各种错误的中断。">
    <meta name="keywords" content=",OS">
    <meta name="theme-color" content="#0097A7">

    <!-- Disable Fucking Bloody Baidu Tranformation -->
    <meta http-equiv="Cache-Control" content="no-transform" />
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(a){try{localStorage.removeItem(a)}catch(b){}};lsloader.setLS=function(a,c){try{localStorage.setItem(a,c)}catch(b){}};lsloader.getLS=function(a){var c="";try{c=localStorage.getItem(a)}catch(b){c=""}return c};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var b=[];for(var a=0;a<localStorage.length;a++){b.push(localStorage.key(a))}b.forEach(function(e){var f=lsloader.getLS(e);if(window.oldVersion){var d=window.oldVersion.reduce(function(g,h){return g||f.indexOf("/*"+h+"*/")!==-1},false);if(d){lsloader.removeLS(e)}}})}catch(c){}};lsloader.clean();lsloader.load=function(f,a,b,d){if(typeof b==="boolean"){d=b;b=undefined}d=d||false;b=b||function(){};var e;e=this.getLS(f);if(e&&e.indexOf(versionString)===-1){this.removeLS(f);this.requestResource(f,a,b,d);return}if(e){var c=e.split(versionString)[0];if(c!=a){console.log("reload:"+a);this.removeLS(f);this.requestResource(f,a,b,d);return}e=e.split(versionString)[1];if(d){this.jsRunSequence.push({name:f,code:e});this.runjs(a,f,e)}else{document.getElementById(f).appendChild(document.createTextNode(e));b()}}else{this.requestResource(f,a,b,d)}};lsloader.requestResource=function(b,e,a,c){var d=this;if(c){this.iojs(e,b,function(h,f,g){d.setLS(f,h+versionString+g);d.runjs(h,f,g)})}else{this.iocss(e,b,function(f){document.getElementById(b).appendChild(document.createTextNode(f));d.setLS(b,e+versionString+f)},a)}};lsloader.iojs=function(d,b,g){var a=this;a.jsRunSequence.push({name:b,code:""});try{var f=new XMLHttpRequest();f.open("get",d,true);f.onreadystatechange=function(){if(f.readyState==4){if((f.status>=200&&f.status<300)||f.status==304){if(f.response!=""){g(d,b,f.response);return}}a.jsfallback(d,b)}};f.send(null)}catch(c){a.jsfallback(d,b)}};lsloader.iocss=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.iofonts=function(f,c,h,a){var b=this;try{var g=new XMLHttpRequest();g.open("get",f,true);g.onreadystatechange=function(){if(g.readyState==4){if((g.status>=200&&g.status<300)||g.status==304){if(g.response!=""){h(g.response);a();return}}b.cssfallback(f,c,a)}};g.send(null)}catch(d){b.cssfallback(f,c,a)}};lsloader.runjs=function(f,c,e){if(!!c&&!!e){for(var b in this.jsRunSequence){if(this.jsRunSequence[b].name==c){this.jsRunSequence[b].code=e}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var a=document.createElement("script");a.appendChild(document.createTextNode(this.jsRunSequence[0].code));a.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(a);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else{if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var d=this;var a=document.createElement("script");a.src=this.jsRunSequence[0].path;a.type="text/javascript";this.jsRunSequence[0].status="loading";a.onload=function(){d.jsRunSequence.shift();if(d.jsRunSequence.length>0){d.runjs()}};document.body.appendChild(a)}}};lsloader.tagLoad=function(b,a){this.jsRunSequence.push({name:a,code:"",path:b,status:"failed"});this.runjs()};lsloader.jsfallback=function(c,b){if(!!this.jsnamemap[b]){return}else{this.jsnamemap[b]=b}for(var a in this.jsRunSequence){if(this.jsRunSequence[a].name==b){this.jsRunSequence[a].code="";this.jsRunSequence[a].status="failed";this.jsRunSequence[a].path=c}}this.runjs()};lsloader.cssfallback=function(e,c,b){if(!!this.cssnamemap[c]){return}else{this.cssnamemap[c]=1}var d=document.createElement("link");d.type="text/css";d.href=e;d.rel="stylesheet";d.onload=d.onerror=b;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(d,a)};lsloader.runInlineScript=function(c,b){var a=document.getElementById(b).innerText;this.jsRunSequence.push({name:c,code:a});this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/blog/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/blog/css/style.min.css?MKetZV3cUTfDxvMffaOezg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/blog/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/blog/css/prettify/atelier-seaside-light.min.css?b71t6V/NeTk95fu056Paxw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-image: url(/img/bg3.png);
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icons -->


    <style id="material_icons"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_icons","/blog/css/material-icons.css?pqhB/Rd/ab0H2+kZp0RDmw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/blog/js/jquery.min.js?ezyEvm8ST5CGfpA+kFFi1g==", true)</script>
    

    <!-- WebAPP Icons -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="application-name" content="CCDV2&#39;s nest">
    <meta name="msapplication-starturl" content="https://ccdv2.github.io/blog/OS/day22//">
    <meta name="msapplication-navbutton-color" content="#0097A7">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-title" content="CCDV2&#39;s nest">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon" href="/blog/img/1590.png">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://ccdv2.github.io/blog/OS/day22//">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="Day22 | CCDV2&#39;s nest">
    <meta property="og:image" content="/blog/img/1590.png">
    <meta property="og:description" content="今天继续完善保护操作系统，并且提供了各种错误的中断。">
    <meta property="og:article:tag" content="OS"> 

    
        <meta property="article:published_time" content="Sat Apr 20 2019 10:26:34 GMT+0800">
        <meta property="article:modified_time" content="Sun Apr 21 2019 20:02:40 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:card" content="summary_large_image">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="https://ccdv2.github.io/blog/OS/day22/index.html/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "https://ccdv2.github.io/blog/OS/day22/index.html/index.html",
    "headline": "Day22",
    "datePublished": "Sat Apr 20 2019 10:26:34 GMT+0800",
    "dateModified": "Sun Apr 21 2019 20:02:40 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "CCDV2",
        "image": {
            "@type": "ImageObject",
            "url": "/img/1590.png"
        },
        "description": "高海千歌 is the 最高！（大雾）"
    },
    "publisher": {
        "@type": "Organization",
        "name": "CCDV2&#39;s nest",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/1590.png"
        }
    },
    "keywords": ",OS",
    "description": "今天继续完善保护操作系统，并且提供了各种错误的中断。",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span id="MD-burger-id" class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#一些感想"><span class="post-toc-number">1.</span> <span class="post-toc-text">一些感想</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#都会在什么情况下触发异常中断"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">都会在什么情况下触发异常中断</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#其它异常"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">其它异常</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#解读可执行程序开始存放的信息"><span class="post-toc-number">1.3.</span> <span class="post-toc-text">解读可执行程序开始存放的信息</span></a></li></ol></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#保护操作系统（5）"><span class="post-toc-number">2.</span> <span class="post-toc-text">保护操作系统（5）</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#帮助发现bug"><span class="post-toc-number">3.</span> <span class="post-toc-text">帮助发现bug</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#强制结束应用程序"><span class="post-toc-number">4.</span> <span class="post-toc-text">强制结束应用程序</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#用C语言显示字符串（1）"><span class="post-toc-number">5.</span> <span class="post-toc-text">用C语言显示字符串（1）</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#用C语言显示字符串（3）"><span class="post-toc-number">6.</span> <span class="post-toc-text">用C语言显示字符串（3）</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#显示窗口"><span class="post-toc-number">7.</span> <span class="post-toc-text">显示窗口</span></a></li><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#在窗口中描绘字符和方块"><span class="post-toc-number">8.</span> <span class="post-toc-text">在窗口中描绘字符和方块</span></a></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/blog/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                Day22
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/blog/img/1590.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>CCDV2</strong>
        <span>4月 20, 2019</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/blog/tags/OS/">OS</a>
    </ul>
    

    <!-- Share -->
    
        <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=Day22&url=https://ccdv2.github.io/blog/OS/day22/index.html/index.html&pic=https://ccdv2.github.io/img/1590.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=Day22&url=https://ccdv2.github.io/blog/OS/day22/index.html/index.html&via=CCDV2" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=https://ccdv2.github.io/blog/OS/day22/index.html/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=https://ccdv2.github.io/blog/OS/day22/index.html/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    

    <!-- Share Telegram -->
    
</ul>

    
</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <p>今天继续完善保护操作系统，并且提供了各种错误的中断。<br><a id="more"></a></p>
<h1 id="一些感想"><a href="#一些感想" class="headerlink" title="一些感想"></a>一些感想</h1><h2 id="都会在什么情况下触发异常中断"><a href="#都会在什么情况下触发异常中断" class="headerlink" title="都会在什么情况下触发异常中断"></a>都会在什么情况下触发异常中断</h2><p>昨天有：修改不属于自己段的内存、修改段寄存器<br>今天有：执行IO的IN、OUT指令，执行中断CLI、STI、HLT指令、CALL应用程序之外的地址<br>看起来应用程序只能限制在调用API了。</p>
<h2 id="其它异常"><a href="#其它异常" class="headerlink" title="其它异常"></a>其它异常</h2><ol>
<li>栈异常0x0c<br>在栈空间上触发的异常。同时许久没讲的esp总算派上用场了，应该给出当前中断之后，栈顶指针地址<pre><code class="c">esp[0] // EDI esp[0 ~ 7]为_asm_inthandler中PUSHAD的结果
esp[1] // ESI
esp[2] // EBP
esp[4] // EBX
esp[5] // EDX
esp[6] // ECX
esp[7] // EAX
esp[8] // DS esp[8 ~ 9]为_asm_inthandler中PUSH的结果
esp[9] // ES
esp[10] // 错误编号（基本上是0，显示出来也没什么意思）
esp[11] // EIP
esp[12] // CS esp[10 ~ 15]为异常产生时CPU自动PUSH的结果
esp[13] // EFLAGS
esp[14] // ESP （应用程序用ESP）
esp[15] // SS（应用程序用SS）
</code></pre>
</li>
<li>除零异常0x00</li>
<li>非法指令异常0x06</li>
</ol>
<h2 id="解读可执行程序开始存放的信息"><a href="#解读可执行程序开始存放的信息" class="headerlink" title="解读可执行程序开始存放的信息"></a>解读可执行程序开始存放的信息</h2><p>这一部分是作者提供的思路，只对该系统适用</p>
<ul>
<li>0x0000 (DWORD)<br>  存放的数据段大小，需要预先在生成.hrb时指定</li>
<li>0x0004 (DWORD)<br>  Hari 标记，只是用来判断是不是可执行文件</li>
<li>0x0008 (DWORD)<br>  数据段内预备空间的大小，暂时用不上</li>
<li>0x000c (DWORD)<br>  应用程序启动时ESP寄存器的初始值，即初始的栈空间大小</li>
<li>0x0010 (DWORD)<br>  向数据段传送的部分的字节数</li>
<li>0x0014 (DWORD)<br>  向数据段传送的部分在.hrb文件中的起始地址</li>
<li>0x0018 (DWORD)<br>  0xe9000000 JMP到应用程序运行的入口地址</li>
<li>0x001c (DWORD)<br>  存放应用程序运行入口地址减去0x20之后的值。这样做可以通过直接JMP 0x1b之后运行应用程序</li>
<li>0x0020 (DWORD)<br>  malloc函数要使用的地址</li>
</ul>
<p>对于包含数据的程序，需要先分配数据段，再启动程序</p>
<h1 id="保护操作系统（5）"><a href="#保护操作系统（5）" class="headerlink" title="保护操作系统（5）"></a>保护操作系统（5）</h1><blockquote>
<p>harib19a</p>
</blockquote>
<p>应用程序尝试使用IO指令</p>
<pre><code class="c">[INSTRSET &quot;i486p&quot;]
[BITS 32]
        MOV        AL,0x34
        OUT        0x43,AL
        MOV        AL,0xff
        OUT        0x40,AL
        MOV        AL,0xff
        OUT        0x40,AL
</code></pre>
<p>尝试中断</p>
<pre><code class="c">[INSTRSET &quot;i486p&quot;]
[BITS 32]
        CLI
fin:
        HLT
        JMP        fin
</code></pre>
<p>尝试CALL别的地方</p>
<pre><code class="c">[INSTRSET &quot;i486p&quot;]
[BITS 32]
        CALL    2*8:0xac1
        MOV        EDX,4
        INT        0x40
</code></pre>
<p>均会触发异常中断。<br>但是注意不要在API里下毒。。</p>
<h1 id="帮助发现bug"><a href="#帮助发现bug" class="headerlink" title="帮助发现bug"></a>帮助发现bug</h1><blockquote>
<p>harib19b</p>
</blockquote>
<p>做一个数组越界的程序</p>
<pre><code class="c">void HariMain(void)
{
    char a[100];
    a[10] = &#39;A&#39;;        // 这句当然没有问题
    api_putchar(a[10]);
    a[102] = &#39;B&#39;;        // 这句就有问题了
    api_putchar(a[102]);
    a[123] = &#39;C&#39;;        // 这句也有问题了
    api_putchar(a[123]);
    api_end();
}
</code></pre>
<p>因为是栈中分配的数组，现在做一个栈异常</p>
<pre><code class="c">_asm_inthandler0c:
        STI
        PUSH    ES
        PUSH    DS
        PUSHAD
        MOV        EAX,ESP
        PUSH    EAX
        MOV        AX,SS
        MOV        DS,AX
        MOV        ES,AX
        CALL    _inthandler0c
        CMP        EAX,0
        JNE        end_app
        POP        EAX
        POPAD
        POP        DS
        POP        ES
        ADD        ESP,4            ; 在INT 0x0c中也需要这句
        IRETD
</code></pre>
<p>接下来就写c语言的中断服务程序，为了更好地知道我们到底是在哪条指令出的错，我们把当前执行到的指令地址打印出来</p>
<pre><code class="c">int *inthandler0c(int *esp)
{
    struct CONSOLE *cons = (struct CONSOLE *) *((int *) 0x0fec);
    struct TASK *task = task_now();
    char s[30];
    cons_putstr0(cons, &quot;\nINT 0C :\n Stack Exception.\n&quot;);
    sprintf(s, &quot;EIP = %08X\n&quot;, esp[11]);
    cons_putstr0(cons, s);
    return &amp;(task-&gt;tss.esp0);    // 强制结束程序
}
</code></pre>
<p>在IDT中登记略</p>
<p>通过对刚才bug程序的测试，发现是对赋值’C’时出了错。<br>PS：具体查看指令<br>0x24为HariMain起始地址 0x24 + 0x1e（偏移） = 0x42（EIP）<br>HariMain的0x1e为 MOV BYTE[11 + EBP],67 即刚才说的’C’</p>
<h1 id="强制结束应用程序"><a href="#强制结束应用程序" class="headerlink" title="强制结束应用程序"></a>强制结束应用程序</h1><blockquote>
<p>harib19c</p>
</blockquote>
<p>比如一个死循环程序，我们需要通过某些方法来结束它，这里定义为shift+F1<br>为了使得强制结束键在全局状态下都可以用，把判断的逻辑写到了bootpack.c中</p>
<pre><code class="c">if(i == 256 + 0x3b &amp;&amp; key_shift != 0 &amp;&amp; task_cons-&gt;tss.ss0 != 0) // Shift + F1
{
    cons = (struct CONSOLE *)*((int *)0x0fec);
    cons_putstr0(cons, &quot;\nBreak(key) :\n&quot;);
    io_cli();    // 不能在改变寄存器值时切换到其他任务
    task_cons-&gt;tss.eax = (int)&amp;(task_cons-&gt;tss.esp0); // 指向cmd的ESP
    task_cons-&gt;tss.eip = (int)asm_end_app;
    io_sti();
}
</code></pre>
<p>当按下强制结束键之后，改变寄存器值，EIP直接指到asm_end_app，结束程序<br>为了防止程序不在运行的时候结束程序，需要判断ss0不为0，（ss0不为0时活动）</p>
<pre><code class="c">_asm_end_app:
;    EAX为tss.esp0的地址
        MOV        ESP,[EAX]
        MOV        DWORD [EAX+4],0
        POPAD
        RET                    ; 返回cmd_app
</code></pre>
<p>在task_alloc初始化的时候，也需要先把ss0置为0<br>这样就可以强制停止应用程序了</p>
<h1 id="用C语言显示字符串（1）"><a href="#用C语言显示字符串（1）" class="headerlink" title="用C语言显示字符串（1）"></a>用C语言显示字符串（1）</h1><blockquote>
<p>harib19d</p>
</blockquote>
<p>做一个C语言显示字符串的API</p>
<pre><code class="c">_api_putstr0:    ; void api_putstr0(char *s);
        PUSH    EBX
        MOV        EDX,2
        MOV        EBX,[ESP+8]        ; s
        INT        0x40
        POP        EBX
        RET
</code></pre>
<p>用这个api来显示字符串。但什么都显示不出来。<br>但是作者奇怪地想到了之前的RETF没用了，需要修改（参考昨天第二节）<br>这样可以运行打印字符，但不能运行打印字符串</p>
<h1 id="用C语言显示字符串（3）"><a href="#用C语言显示字符串（3）" class="headerlink" title="用C语言显示字符串（3）"></a>用C语言显示字符串（3）</h1><blockquote>
<p>harib19e</p>
</blockquote>
<p>为了debug，在调用API的时候，看看EBX是什么样子的</p>
<pre><code class="c">int* hrb_api(int edi, int esi, int ebp, int esp, int ebx, int edx, int ecx, int eax)
{
    int cs_base = *((int *)0xfe8);
    struct CONSOLE *cons = (struct CONSOLE *) *((int *) 0x0fec);
    struct TASK *task = task_now();
    char s[12];
    switch(edx)
    {
    case 1:
        cons_putchar(cons, eax &amp; 0xff, 1);
        break;
    case 2:
        cons_putstr0(cons, (char *)ebx + cs_base);
        spritnf(s, &quot;%08X\n&quot;, ebx);
        cons_putstr0(cons, s);
        break;
    case 3:
        cons_putstr1(cons, (char *)ebx + cs_base, ecx);
        break;
    case 4:
        return &amp;(task-&gt;tss.esp0);
        break;
    default:
        break;
    }
    return 0;
}
</code></pre>
<p>EBX会显示为0x400，原因是认为”hello world”这个字符串存放在0x400中（其实并不是）<br>事实上，这个常量字符串应该存放在数据段中，但是我们并没指定。所以需要指定一下</p>
<pre><code class="c">if(finfo != 0)
{
    // 找到文件的情况
    p = (char *)memman_alloc_4k(memman, finfo-&gt;size);
    file_loadfile(finfo-&gt;clustno, finfo-&gt;size, p, fat, (char *)(ADR_DISKIMG + 0x003e00));
    if(finfo-&gt;size &gt;= 36 &amp;&amp; strncmp(p + 4, &quot;Hari&quot;, 4) == 0 &amp;&amp; *p == 0x00)
    {
        segsiz = *((int *)(p + 0x0000));
        esp    = *((int *)(p + 0x000c));
        datsiz = *((int *)(p + 0x0010));
        dathrb = *((int *)(p + 0x0014));
        q = (char *)memman_alloc_4k(memman, segsiz); // 分配数据段
        *((int *)0xfe8) = (int) q;
        set_segmdesc(gdt + 1003, finfo-&gt;size - 1, (int) p, AR_CODE32_ER + 0x60);
        set_segmdesc(gdt + 1004, segsiz - 1,      (int) q, AR_DATA32_RW + 0x60);
        for(i = 0; i &lt; datsiz; ++i)
        {
            q[esp + i] = p[dathrb + i];
        }
        start_app(0x1b, 1003 * 8, esp, 1004 * 8, &amp;(task-&gt;tss.esp0));
        memman_free_4k(memman, (int)q, segsiz);
    }
    else
    {
        cons_putstr0(cons, &quot;.hrb file format error.\n&quot;);
    }
    memman_free_4k(memman, (int) p, finfo-&gt;size);
    cons_newline(cons);
    return 1;
}
</code></pre>
<p>这样就先分配好数据段，复制数据部分，就可以正确执行了。</p>
<pre><code class="c">[FORMAT &quot;WCOFF&quot;]
[INSTRSET &quot;i486p&quot;]
[BITS 32]
[FILE &quot;hello5.nas&quot;]

        GLOBAL    _HariMain

[SECTION .text]

_HariMain:
        MOV        EDX,2
        MOV        EBX,msg
        INT        0x40
        MOV        EDX,4
        INT        0x40

[SECTION .data]

msg:
        DB    &quot;hello, world&quot;, 0x0a, 0

</code></pre>
<p>SECTION 的意思是表示这部分东西，应该放到代码段还是数据段</p>
<h1 id="显示窗口"><a href="#显示窗口" class="headerlink" title="显示窗口"></a>显示窗口</h1><blockquote>
<p>harib19f</p>
</blockquote>
<p>总算做好了各种异常、各种API，现在又跑到图形化了的地方了。开始着手可以让应用程序申请窗口。<br>API设计如下<br>EDX = 5<br>EBX = 窗口缓冲区<br>ESI = 窗口在x轴方向上的大小<br>EDI = 窗口在y轴方向上的大小<br>EAX = 透明色<br>ECX = 窗口名称<br>调用后，返回值如下<br>EAX = 用于窗口操作的句柄（用于窗口刷新等操作）</p>
<p>这样定义之后，开始修改API</p>
<pre><code class="c">int* hrb_api(int edi, int esi, int ebp, int esp, int ebx, int edx, int ecx, int eax)
{
    int ds_base = *((int *) 0xfe8);
    struct TASK *task = task_now();
    struct CONSOLE *cons = (struct CONSOLE *)*((int *)0x0fec);
    struct SHTCTL *shtctl = (struct SHTCTL *)*((int *)0x0fe4); // 在主函数里存储过
    struct SHEET *sht;
    int *reg = &amp;eax + 1;    // eax后面的地址
        // 强行改写通过PUSHAD保存的值
        // reg[0] : EDI,   reg[1] : ESI,   reg[2] : EBP,   reg[3] : ESP
        // reg[4] : EBX,   reg[5] : EDX,   reg[6] : ECX,   reg[7] : EAX
    switch(edx)
    {
    case 1:
        cons_putchar(cons, eax &amp; 0xff, 1);
        break;
    case 2:
        cons_putstr0(cons, (char *)ebx + cs_base);
        break;
    case 3:
        cons_putstr1(cons, (char *)ebx + cs_base, ecx);
        break;
    case 4:
        return &amp;(task-&gt;tss.esp0);
        break;
    case 5:
        sht = sheet_alloc(shtctl);
        sheet_setbuf(sht, (char *) ebx + ds_base, esi, edi, eax);
        make_window8((char *) ebx + ds_base, esi, edi, (char *) ecx + ds_base, 0);
        sheet_slide(sht, 100, 50);
        sheet_updown(sht, 3);    // 背景高度3位于task_a之上
        break;
    default:
        break;
    }
    return 0;
}
</code></pre>
<p>汇编API：</p>
<pre><code class="c">_api_openwin:    ; int api_openwin(char *buf, int xsiz, int ysiz, int col_inv, char *title);
        PUSH    EDI
        PUSH    ESI
        PUSH    EBX
        MOV        EDX,5
        MOV        EBX,[ESP+16]    ; buf
        MOV        ESI,[ESP+20]    ; xsiz
        MOV        EDI,[ESP+24]    ; ysiz
        MOV        EAX,[ESP+28]    ; col_inv
        MOV        ECX,[ESP+32]    ; title
        INT        0x40
        POP        EBX
        POP        ESI
        POP        EDI
        RET
</code></pre>
<p>测试一下</p>
<pre><code class="c">char buf[150 * 50];

void HariMain(void)
{
    int win;
    win = api_openwin(buf, 150, 50, -1, &quot;hello&quot;);
    api_end();
}
</code></pre>
<p>能出窗口了</p>
<h1 id="在窗口中描绘字符和方块"><a href="#在窗口中描绘字符和方块" class="headerlink" title="在窗口中描绘字符和方块"></a>在窗口中描绘字符和方块</h1><blockquote>
<p>harib19g</p>
</blockquote>
<p>添加一些有关窗口的API<br>显示字符：<br>EDX = 6<br>EBX = 窗口句柄<br>ESI = 显示位置的x坐标<br>EDI = 显示位置的y坐标<br>EAX = 色号<br>ECX = 字符串长度<br>EBP = 字符串<br>描绘方块：<br>EDX = 7<br>EBX = 窗口句柄<br>ESI = x0<br>EDI = y0<br>EAX = x1<br>ECX = y1<br>EBP = 色号<br>修改API</p>
<pre><code class="c">int* hrb_api(int edi, int esi, int ebp, int esp, int ebx, int edx, int ecx, int eax)
{
    int ds_base = *((int *) 0xfe8);
    struct TASK *task = task_now();
    struct CONSOLE *cons = (struct CONSOLE *)*((int *)0x0fec);
    struct SHTCTL *shtctl = (struct SHTCTL *)*((int *)0x0fe4); // 在主函数里存储过
    struct SHEET *sht;
    int *reg = &amp;eax + 1;    // eax后面的地址
        // 强行改写通过PUSHAD保存的值
        // reg[0] : EDI,   reg[1] : ESI,   reg[2] : EBP,   reg[3] : ESP
        // reg[4] : EBX,   reg[5] : EDX,   reg[6] : ECX,   reg[7] : EAX
    switch(edx)
    {
    case 1:
        cons_putchar(cons, eax &amp; 0xff, 1);
        break;
    case 2:
        cons_putstr0(cons, (char *)ebx + cs_base);
        break;
    case 3:
        cons_putstr1(cons, (char *)ebx + cs_base, ecx);
        break;
    case 4:
        return &amp;(task-&gt;tss.esp0);
        break;
    case 5:
        sht = sheet_alloc(shtctl);
        sheet_setbuf(sht, (char *) ebx + ds_base, esi, edi, eax);
        make_window8((char *) ebx + ds_base, esi, edi, (char *) ecx + ds_base, 0);
        sheet_slide(sht, 100, 50);
        sheet_updown(sht, 3);    // 背景高度3位于task_a之上
        break;
    case 6:
        sht = (struct SHEET *)ebx;
        putfonts8_asc(sht-&gt;buf, sht-&gt;bxsize, esi, edi, eax, (char *)ebp + ds_base);
        sheet_refresh(sht, esi, edi, esi + ecx * 8, edi + 16);
        break;
    case 7:
        sht = (struct SHEET *) ebx;
        boxfill8(sht-&gt;buf, sht-&gt;bxsize, ebp, eax, ecx, esi, edi);
        sheet_refresh(sht, eax, ecx, esi + 1, edi + 1);
        break;
    default:
        break;
    }
    return 0;
}
</code></pre>
<p>汇编api：</p>
<pre><code class="c">_api_putstrwin:    ; void api_putstrwin(int win, int x, int y, int col, int len, char *str);
        PUSH    EDI
        PUSH    ESI
        PUSH    EBP
        PUSH    EBX
        MOV        EDX,6
        MOV        EBX,[ESP+20]    ; win
        MOV        ESI,[ESP+24]    ; x
        MOV        EDI,[ESP+28]    ; y
        MOV        EAX,[ESP+32]    ; col
        MOV        ECX,[ESP+36]    ; len
        MOV        EBP,[ESP+40]    ; str
        INT        0x40
        POP        EBX
        POP        EBP
        POP        ESI
        POP        EDI
        RET

_api_boxfilwin:    ; void api_boxfilwin(int win, int x0, int y0, int x1, int y1, int col);
        PUSH    EDI
        PUSH    ESI
        PUSH    EBP
        PUSH    EBX
        MOV        EDX,7
        MOV        EBX,[ESP+20]    ; win
        MOV        EAX,[ESP+24]    ; x0
        MOV        ECX,[ESP+28]    ; y0
        MOV        ESI,[ESP+32]    ; x1
        MOV        EDI,[ESP+36]    ; y1
        MOV        EBP,[ESP+40]    ; col
        INT        0x40
        POP        EBX
        POP        EBP
        POP        ESI
        POP        EDI
        RET
</code></pre>
<p>这两个API就是把各种寄存器值存起来<br>来测试一下</p>
<pre><code class="c">void HariMain(void)
{
    int win;
    win = api_openwin(buf, 150, 50, -1, &quot;hello&quot;);
    api_boxfilwin(win,  8, 36, 141, 43, 3 /* 黄色 */);
    api_putstrwin(win, 28, 28, 0 /* 黑色 */, 12, &quot;hello, world&quot;);
    api_end();
}
</code></pre>
<p>看起来没什么问题。。今天先到这里</p>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 来必力 -->
<div id="livere-comment">
    <div id="lv-container" data-id="city" data-uid="MTAyMC8zNzY3Ni8xNDIwNw==">
	<script type="text/ls-javascript" id="livere-comment-js">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];
       if (typeof LivereTower === 'function') { return; }
       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;
       e.parentNode.insertBefore(j, e);
   })(document, 'script');
	</script>
</div>
</div>
<style>
    #livere-comment{
        background-color: #eee;
        padding: 2pc;
    }
</style>

                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/blog/OS/day23/index.html/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/blog/OS/day21/index.html/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/blog/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/blog/img/1590.png" alt="CCDV2's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        ccdv21999@gmail.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto: ccdv21999@gmail.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/blog/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/blog/archives/2019/11/">十一月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2019/05/">五月 2019<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2019/04/">四月 2019<span class="sidebar_archives-count">12</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2019/03/">三月 2019<span class="sidebar_archives-count">16</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2019/01/">一月 2019<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2018/12/">十二月 2018<span class="sidebar_archives-count">24</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2018/11/">十一月 2018<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2018/09/">九月 2018<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2018/08/">八月 2018<span class="sidebar_archives-count">14</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2018/07/">七月 2018<span class="sidebar_archives-count">9</span></a></li><li><a class="sidebar_archives-link" href="/blog/archives/2018/06/">六月 2018<span class="sidebar_archives-count">4</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/blog/categories/CG/">CG<span class="sidebar_archives-count">17</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/CG/openGL/">openGL<span class="sidebar_archives-count">17</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/CV/">CV<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/CV/分类算法/">分类算法<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/CV/神经网络/">神经网络<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/CV/神经网络/分类算法/">分类算法<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/OS/">OS<span class="sidebar_archives-count">29</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/VHDL/">VHDL<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/">acm<span class="sidebar_archives-count">29</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/IO/">IO<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/dfs/">dfs<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/dfs/剪枝/">剪枝<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/博弈论/">博弈论<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/字符串/">字符串<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/数学/">数学<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/数据结构/">数据结构<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/网络流/">网络流<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/blog/categories/acm/计算几何/">计算几何<span class="sidebar_archives-count">17</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    

    <!-- Article Number  -->
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>CCDV2's nest
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/blog/js/lazyload.min.js?wgjW/HuQG9JDgvPDPoRAng==", true)</script>



    <script>lsloader.load("js_js","/blog/js/js.min.js?d+XW6aNuIPgOn1iA7NnB4g==", true)</script>



    <script>lsloader.load("np_js","/blog/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>









   





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/blog/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/blog/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.2 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
